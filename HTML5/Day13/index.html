<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Tom</title>
		<style type="text/css">
			body{
				margin: 0;
				height: 100%;
				width: 100%;
			}
			img{
				width: 100%;
				height: 100%;
			}
		</style>
	</head>
	<body onclick="action(event)">
		<img src="www/angry/angry_00.jpg" id="tom"/>
		<audio id="player"></audio>
		<script type="text/javascript">
			var img = document.getElementById('tom');
			var player = document.getElementById('player');
			//获取屏幕的可见宽度高度
			var w = document.documentElement.clientWidth;
			var h = document.documentElement.clientHeight;
			function play(name,total,startAt){
				var i = 0;
				function animate(){
					var src = name + '/' + name + '_' + (i < 10 ? + '0' : '' ) + i + '.jpg';
					img.src = src;
					if(i<total){
						setTimeout(animate,100);
						if(i==startAt){
							player.src = 'sounds/'+name+'.m4a';
							player.play();
						}
						if(name=='drink' && i==10){
							player.src = 'sounds/pour.m4a';
						}
					}
				}
			}
			
			function action(event){
				var x = event.pageX*360/w;
				var y = event.pageY*480/h;
				if(x >= 75 && x <= xs109&&y>=86&&y<=){
					play('pie',23,0);
				}
			}
		</script>
	</body>
</html>
